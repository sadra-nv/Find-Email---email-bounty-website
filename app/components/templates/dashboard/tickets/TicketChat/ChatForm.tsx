"use client";

import { Button, Field, Input, Label } from "@headlessui/react";
import { EmojiClickData, EmojiStyle } from "emoji-picker-react";
import dynamic from "next/dynamic";
import { useRef, useState } from "react";

const EmojiPicker = dynamic(
  () => {
    return import("emoji-picker-react");
  },
  { ssr: false }
);

export default function ChatForm() {
  const inputRef = useRef<HTMLInputElement>(null);

  const emojiHandler = (emojiData: EmojiClickData) => {
    // console.log(emojiData);
    inputRef.current!.value += emojiData.emoji;
  };

  const [isShowing, setIsShowing] = useState(false);
  const clickHandler = () => {
    setIsShowing((prevState) => !prevState);
  };

  return (
    <>
      {isShowing && (
        <EmojiPicker
          onEmojiClick={emojiHandler}
          emojiStyle={EmojiStyle.APPLE}
          skinTonesDisabled
          searchDisabled
          lazyLoadEmojis
          style={{
            width: "100%",
            height: "17.5rem",
            position: "absolute",
            bottom: "4.375rem",
            zIndex: 40,
          }}
        />
      )}
      <form className="bottom-0 absolute w-full flex justify-start items-center gap-2">
        <Field className="w-full relative">
          <Label
            className="py-4 px-4 sm:px-6 bg-fe-c-bg-light shadow-sm rounded-full w-full 
        flex justify-start items-center h-10 sm:h-11 min-w-full"
          >
            <Input
              ref={inputRef}
              className="text-fe-c-text-sub text-xs w-[calc(100%_-_3.75rem)] bg-transparent outline-none"
              placeholder="write your massage..."
            />
          </Label>

          <div className="absolute right-4 sm:right-6 flex justify-start items-center gap-3 top-1/2 -translate-y-1/2">
            <Button onClick={clickHandler}>üòÅ</Button>

            <Button>
              <svg width="16" height="15" viewBox="0 0 16 15" fill="none">
                <mask
                  id="path-1-inside-1_396_5181"
                  className="fill-fe-c-text-title"
                >
                  <path d="M15.4175 9.34668C15.2631 9.34668 15.1149 9.40805 15.0057 9.51728C14.8965 9.62651 14.8351 9.77466 14.8351 9.92913V11.9182C14.8351 12.387 14.6488 12.8367 14.3173 13.1682C13.9858 13.4997 13.5362 13.686 13.0673 13.686H2.93265C2.46382 13.686 2.01418 13.4997 1.68267 13.1682C1.35115 12.8367 1.16491 12.387 1.16491 11.9182V9.92913C1.16491 9.77466 1.10354 9.62651 0.99431 9.51728C0.885079 9.40805 0.73693 9.34668 0.582454 9.34668C0.427977 9.34668 0.279828 9.40805 0.170597 9.51728C0.0613654 9.62651 0 9.77466 0 9.92913V11.9182C0.000770999 12.6958 0.309994 13.4412 0.859806 13.9911C1.40962 14.5409 2.1551 14.8501 2.93265 14.8509H13.0673C13.8449 14.8501 14.5904 14.5409 15.1402 13.9911C15.69 13.4412 15.9992 12.6958 16 11.9182V9.92913C16 9.77466 15.9386 9.62651 15.8294 9.51728C15.7202 9.40805 15.572 9.34668 15.4175 9.34668Z" />
                </mask>
                <path
                  d="M15.4175 9.34668C15.2631 9.34668 15.1149 9.40805 15.0057 9.51728C14.8965 9.62651 14.8351 9.77466 14.8351 9.92913V11.9182C14.8351 12.387 14.6488 12.8367 14.3173 13.1682C13.9858 13.4997 13.5362 13.686 13.0673 13.686H2.93265C2.46382 13.686 2.01418 13.4997 1.68267 13.1682C1.35115 12.8367 1.16491 12.387 1.16491 11.9182V9.92913C1.16491 9.77466 1.10354 9.62651 0.99431 9.51728C0.885079 9.40805 0.73693 9.34668 0.582454 9.34668C0.427977 9.34668 0.279828 9.40805 0.170597 9.51728C0.0613654 9.62651 0 9.77466 0 9.92913V11.9182C0.000770999 12.6958 0.309994 13.4412 0.859806 13.9911C1.40962 14.5409 2.1551 14.8501 2.93265 14.8509H13.0673C13.8449 14.8501 14.5904 14.5409 15.1402 13.9911C15.69 13.4412 15.9992 12.6958 16 11.9182V9.92913C16 9.77466 15.9386 9.62651 15.8294 9.51728C15.7202 9.40805 15.572 9.34668 15.4175 9.34668Z"
                  className="fill-fe-c-text-title"
                />
                <path
                  d="M1.16491 11.9182H-6.83509H1.16491ZM0 9.92913H-8H0ZM0 11.9182H-8L-8 11.9261L0 11.9182ZM2.93265 14.8509L2.92472 22.8509H2.93265V14.8509ZM13.0673 14.8509V22.8509L13.0753 22.8509L13.0673 14.8509ZM16 11.9182L24 11.9261V11.9182H16ZM15.4175 1.34668C13.1413 1.34668 10.9583 2.25091 9.34883 3.86042L20.6625 15.1741C19.2715 16.5652 17.3848 17.3467 15.4175 17.3467V1.34668ZM9.34883 3.86042C7.73931 5.46995 6.83509 7.65293 6.83509 9.92913H22.8351C22.8351 11.8964 22.0536 13.7831 20.6625 15.1741L9.34883 3.86042ZM6.83509 9.92913V11.9182H22.8351V9.92913H6.83509ZM6.83509 11.9182C6.83509 10.2653 7.49171 8.68012 8.66048 7.51134L19.9742 18.8251C21.806 16.9932 22.8351 14.5088 22.8351 11.9182H6.83509ZM8.66048 7.51134C9.82925 6.34257 11.4144 5.68596 13.0673 5.68596V21.686C15.6579 21.686 18.1424 20.6569 19.9742 18.8251L8.66048 7.51134ZM13.0673 5.68596H2.93265V21.686H13.0673V5.68596ZM2.93265 5.68596C4.58555 5.68596 6.17075 6.34257 7.33952 7.51134L-3.97419 18.8251C-2.14238 20.6569 0.342083 21.686 2.93265 21.686V5.68596ZM7.33952 7.51134C8.50829 8.68012 9.16491 10.2653 9.16491 11.9182H-6.83509C-6.83509 14.5088 -5.80599 16.9932 -3.97419 18.8251L7.33952 7.51134ZM9.16491 11.9182V9.92913H-6.83509V11.9182H9.16491ZM9.16491 9.92913C9.16491 7.65292 8.26068 5.46994 6.65116 3.86042L-4.66254 15.1741C-6.0536 13.7831 -6.83509 11.8964 -6.83509 9.92913H9.16491ZM6.65116 3.86042C5.04166 2.25092 2.85869 1.34668 0.582454 1.34668V17.3467C-1.38483 17.3467 -3.2715 16.5652 -4.66254 15.1741L6.65116 3.86042ZM0.582454 1.34668C-1.69378 1.34668 -3.87675 2.25092 -5.48626 3.86042L5.82745 15.1741C4.43641 16.5652 2.54973 17.3467 0.582454 17.3467V1.34668ZM-5.48626 3.86042C-7.09577 5.46994 -8 7.65292 -8 9.92913H8C8 11.8964 7.2185 13.7831 5.82745 15.1741L-5.48626 3.86042ZM-8 9.92913V11.9182H8V9.92913H-8ZM-8 11.9261C-7.99712 14.8227 -6.84521 17.5998 -4.79705 19.6479L6.51666 8.33421C7.4652 9.28274 7.99867 10.5689 8 11.9103L-8 11.9261ZM-4.79705 19.6479C-2.74889 21.6961 0.0281883 22.848 2.92472 22.8509L2.94059 6.85087C4.28202 6.8522 5.56812 7.38567 6.51666 8.33421L-4.79705 19.6479ZM2.93265 22.8509H13.0673V6.85087H2.93265V22.8509ZM13.0753 22.8509C15.9718 22.848 18.7489 21.6961 20.797 19.6479L9.48334 8.33421C10.4319 7.38567 11.718 6.8522 13.0594 6.85087L13.0753 22.8509ZM20.797 19.6479C22.8452 17.5998 23.9971 14.8227 24 11.9261L8 11.9103C8.00133 10.5689 8.5348 9.28274 9.48334 8.33421L20.797 19.6479ZM24 11.9182V9.92913H8V11.9182H24ZM24 9.92913C24 7.65289 23.0958 5.46992 21.4863 3.86042L10.1725 15.1741C8.78151 13.7831 8 11.8964 8 9.92913H24ZM21.4863 3.86042C19.8768 2.25092 17.6938 1.34668 15.4175 1.34668V17.3467C13.4503 17.3467 11.5636 16.5652 10.1725 15.1741L21.4863 3.86042Z"
                  className="fill-fe-c-text-title"
                  mask="url(#path-1-inside-1_396_5181)"
                />
                <mask
                  id="path-3-inside-2_396_5181"
                  className="fill-fe-c-text-title"
                >
                  <path d="M5.08861 4.30842L7.41842 1.97861V10.628C7.41842 10.7825 7.47979 10.9307 7.58902 11.0399C7.69825 11.1491 7.8464 11.2105 8.00088 11.2105C8.15535 11.2105 8.3035 11.1491 8.41273 11.0399C8.52196 10.9307 8.58333 10.7825 8.58333 10.628V1.98734L10.9131 4.31716C10.9673 4.37127 11.0315 4.4142 11.1022 4.44349C11.1729 4.47277 11.2487 4.48785 11.3252 4.48785C11.4018 4.48785 11.4775 4.47277 11.5482 4.44349C11.619 4.4142 11.6832 4.37127 11.7373 4.31716C11.7914 4.26304 11.8344 4.1988 11.8636 4.12809C11.8929 4.05738 11.908 3.9816 11.908 3.90507C11.908 3.82854 11.8929 3.75276 11.8636 3.68205C11.8344 3.61135 11.7914 3.5471 11.7373 3.49299L8.41442 0.170088C8.33346 0.0915525 8.23287 0.0362297 8.12319 0.00991327C8.02892 -0.00743969 7.93187 -0.00195228 7.84016 0.0259158C7.74845 0.0537839 7.66475 0.103221 7.59607 0.170088L4.27317 3.48425C4.1807 3.59552 4.13295 3.73722 4.13922 3.88176C4.14549 4.0263 4.20532 4.16334 4.30708 4.26618C4.40884 4.36903 4.54523 4.43032 4.68969 4.43813C4.83416 4.44594 4.97636 4.3997 5.08861 4.30842Z" />
                </mask>
                <path
                  d="M5.08861 4.30842L7.41842 1.97861V10.628C7.41842 10.7825 7.47979 10.9307 7.58902 11.0399C7.69825 11.1491 7.8464 11.2105 8.00088 11.2105C8.15535 11.2105 8.3035 11.1491 8.41273 11.0399C8.52196 10.9307 8.58333 10.7825 8.58333 10.628V1.98734L10.9131 4.31716C10.9673 4.37127 11.0315 4.4142 11.1022 4.44349C11.1729 4.47277 11.2487 4.48785 11.3252 4.48785C11.4018 4.48785 11.4775 4.47277 11.5482 4.44349C11.619 4.4142 11.6832 4.37127 11.7373 4.31716C11.7914 4.26304 11.8344 4.1988 11.8636 4.12809C11.8929 4.05738 11.908 3.9816 11.908 3.90507C11.908 3.82854 11.8929 3.75276 11.8636 3.68205C11.8344 3.61135 11.7914 3.5471 11.7373 3.49299L8.41442 0.170088C8.33346 0.0915525 8.23287 0.0362297 8.12319 0.00991327C8.02892 -0.00743969 7.93187 -0.00195228 7.84016 0.0259158C7.74845 0.0537839 7.66475 0.103221 7.59607 0.170088L4.27317 3.48425C4.1807 3.59552 4.13295 3.73722 4.13922 3.88176C4.14549 4.0263 4.20532 4.16334 4.30708 4.26618C4.40884 4.36903 4.54523 4.43032 4.68969 4.43813C4.83416 4.44594 4.97636 4.3997 5.08861 4.30842Z"
                  className="fill-fe-c-text-title"
                />
                <path
                  d="M5.08861 4.30842L10.136 10.5152L10.4548 10.2559L10.7455 9.96527L5.08861 4.30842ZM7.41842 1.97861H15.4184V-17.3351L1.76157 -3.67825L7.41842 1.97861ZM8.58333 1.98734L14.2402 -3.66951L0.583329 -17.3264V1.98734H8.58333ZM10.9131 4.31716L5.25629 9.97401H5.25629L10.9131 4.31716ZM11.908 3.90507H19.908H11.908ZM11.7373 3.49299L17.3942 -2.16387V-2.16387L11.7373 3.49299ZM8.41442 0.170088L14.0713 -5.48677L14.0283 -5.52975L13.9846 -5.57208L8.41442 0.170088ZM8.12319 0.00991327L9.98972 -7.76929L9.78179 -7.81918L9.5715 -7.85789L8.12319 0.00991327ZM7.59607 0.170088L2.01526 -5.5618L1.98076 -5.52821L1.94667 -5.49421L7.59607 0.170088ZM4.27317 3.48425L-1.37623 -2.18005L-1.64072 -1.91625L-1.87948 -1.62896L4.27317 3.48425ZM10.7455 9.96527L13.0753 7.63546L1.76157 -3.67825L-0.568246 -1.34843L10.7455 9.96527ZM-0.581578 1.97861V10.628H15.4184V1.97861H-0.581578ZM-0.581578 10.628C-0.581578 12.9042 0.32264 15.0872 1.93216 16.6968L13.2459 5.38304C14.6369 6.77411 15.4184 8.66079 15.4184 10.628H-0.581578ZM1.93216 16.6968C3.5417 18.3063 5.72468 19.2105 8.00088 19.2105V3.2105C9.96812 3.2105 11.8548 3.99198 13.2459 5.38304L1.93216 16.6968ZM8.00088 19.2105C10.2771 19.2105 12.46 18.3063 14.0696 16.6968L2.75588 5.38304C4.14695 3.99197 6.03364 3.2105 8.00088 3.2105V19.2105ZM14.0696 16.6968C15.6791 15.0872 16.5833 12.9042 16.5833 10.628H0.583329C0.583329 8.66081 1.3648 6.77412 2.75588 5.38304L14.0696 16.6968ZM16.5833 10.628V1.98734H0.583329V10.628H16.5833ZM2.92647 7.6442L5.25629 9.97401L16.57 -1.3397L14.2402 -3.66951L2.92647 7.6442ZM5.25629 9.97401C6.05328 10.771 6.99944 11.4032 8.04074 11.8345L14.1637 -2.94755C15.0636 -2.5748 15.8812 -2.02846 16.57 -1.3397L5.25629 9.97401ZM8.04074 11.8345C9.08204 12.2658 10.1981 12.4878 11.3252 12.4878V-3.51215C12.2993 -3.51215 13.2638 -3.32029 14.1637 -2.94755L8.04074 11.8345ZM11.3252 12.4878C12.4524 12.4878 13.5684 12.2658 14.6097 11.8345L8.48678 -2.94755C9.38666 -3.32029 10.3512 -3.51215 11.3252 -3.51215V12.4878ZM14.6097 11.8345C15.651 11.4032 16.5972 10.771 17.3942 9.97401L6.08046 -1.3397C6.76922 -2.02846 7.58689 -2.5748 8.48678 -2.94755L14.6097 11.8345ZM17.3942 9.97401C18.1912 9.177 18.8234 8.23083 19.2547 7.18956L4.47261 1.06662C4.84534 0.166763 5.39168 -0.650914 6.08046 -1.3397L17.3942 9.97401ZM19.2547 7.18956C19.686 6.14824 19.908 5.03217 19.908 3.90507H3.90801C3.90801 2.93104 4.09985 1.96653 4.47261 1.06662L19.2547 7.18956ZM19.908 3.90507C19.908 2.77799 19.686 1.66191 19.2547 0.620584L4.47261 6.74352C4.09985 5.8436 3.90801 4.8791 3.90801 3.90507H19.908ZM19.2547 0.620584C18.8234 -0.420687 18.1912 -1.36685 17.3942 -2.16387L6.08046 9.14984C5.39168 8.46106 4.84534 7.64338 4.47261 6.74352L19.2547 0.620584ZM17.3942 -2.16387L14.0713 -5.48677L2.75756 5.82694L6.08046 9.14984L17.3942 -2.16387ZM13.9846 -5.57208C12.8741 -6.6494 11.4943 -7.4083 9.98972 -7.76929L6.25666 7.78912C4.97147 7.48076 3.79284 6.8325 2.84419 5.91226L13.9846 -5.57208ZM9.5715 -7.85789C8.22017 -8.10665 6.8289 -8.02799 5.51423 -7.6285L10.1661 7.68033C9.03483 8.02408 7.83768 8.09177 6.67488 7.87772L9.5715 -7.85789ZM5.51423 -7.6285C4.19955 -7.22901 2.99973 -6.52032 2.01526 -5.5618L13.1769 5.90197C12.3298 6.72676 11.2973 7.33658 10.1661 7.68033L5.51423 -7.6285ZM1.94667 -5.49421L-1.37623 -2.18005L9.92257 9.14855L13.2455 5.83438L1.94667 -5.49421ZM-1.87948 -1.62896C-3.24203 0.0105734 -3.94563 2.09853 -3.85327 4.22835L12.1317 3.53517C12.2115 5.3759 11.6034 7.18046 10.4258 8.59746L-1.87948 -1.62896ZM-3.85327 4.22835C-3.76091 6.35817 -2.8792 8.37738 -1.37984 9.89281L9.994 -1.36045C11.2899 -0.0507112 12.0519 1.69443 12.1317 3.53517L-3.85327 4.22835ZM-1.37984 9.89281C0.11953 11.4082 2.12923 12.3114 4.25794 12.4265L5.12144 -3.55021C6.96122 -3.45078 8.69814 -2.67019 9.994 -1.36045L-1.37984 9.89281ZM4.25794 12.4265C6.38666 12.5415 8.482 11.8602 10.136 10.5152L0.041256 -1.89837C1.47072 -3.06081 3.28165 -3.64965 5.12144 -3.55021L4.25794 12.4265Z"
                  className="fill-fe-c-text-title"
                  mask="url(#path-3-inside-2_396_5181)"
                />
              </svg>
            </Button>
          </div>
        </Field>
        <Button
          className="px-4 py-3 sm:px-7 text-white sm:text-sm font-semibold text-xs sm:py-4 rounded-full
      bg-orange-grad-btn gap-2 group flex justify-center items-center h-10 sm:h-11 "
        >
          <span>Send</span>
          <svg
            className="group-hover:translate-x-1 tran-fast"
            width="13"
            height="13"
            viewBox="0 0 13 13"
            fill="none"
          >
            <path
              d="M2.07724 13C1.33084 13 0.857679 12.7468 0.557787 12.4469C-0.0286699 11.8604 -0.441855 10.6142 0.877672 7.96847L1.45746 6.81555C1.53077 6.66227 1.53077 6.34238 1.45746 6.1891L0.877672 5.03618C-0.44852 2.39046 -0.0286699 1.13758 0.557787 0.557787C1.13758 -0.0286699 2.39046 -0.44852 5.02952 0.877672L10.7341 3.72998C12.1536 4.4364 12.9333 5.42271 12.9333 6.50233C12.9333 7.58194 12.1536 8.56825 10.7408 9.27467L5.03618 12.127C3.74331 12.7734 2.78366 13 2.07724 13ZM2.07724 1.00429C1.71737 1.00429 1.43747 1.09093 1.2642 1.2642C0.777708 1.74403 0.970972 2.99025 1.77069 4.58301L2.35048 5.7426C2.56374 6.17578 2.56374 6.82888 2.35048 7.26205L1.77069 8.41497C0.970972 10.0144 0.777708 11.254 1.2642 11.7338C1.74403 12.2203 2.99025 12.027 4.58968 11.2273L10.2943 8.37499C11.3406 7.85518 11.9337 7.16875 11.9337 6.49566C11.9337 5.82257 11.3339 5.13615 10.2876 4.61633L4.58301 1.77069C3.57004 1.2642 2.69702 1.00429 2.07724 1.00429Z"
              fill="white"
            />
            <path
              d="M5.69427 7.00257H2.09552C1.82229 7.00257 1.5957 6.77599 1.5957 6.50275C1.5957 6.22952 1.82229 6.00293 2.09552 6.00293H5.69427C5.9675 6.00293 6.19409 6.22952 6.19409 6.50275C6.19409 6.77599 5.9675 7.00257 5.69427 7.00257Z"
              fill="white"
            />
          </svg>
        </Button>
      </form>
    </>
  );
}
